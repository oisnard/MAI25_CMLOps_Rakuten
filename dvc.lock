schema: '2.0'
stages:
  import_data:
    cmd: python -m src.data.import_raw_data
    deps:
    - path: params.yaml
      hash: md5
      md5: 77aa10f58b282aa4196f1570ce916106
      size: 1286
    - path: src/data/import_raw_data.py
      hash: md5
      md5: ae8b74f627cc6d76d0d8940e43d8418f
      size: 10289
    outs:
    - path: data/raw/
      hash: md5
      md5: 088449c5d4a8a10e89ac6ec42f2e878c.dir
      size: 2687848905
      nfiles: 98731
  make_dataset:
    cmd: python -m src.data.make_dataset
    deps:
    - path: data/raw/
      hash: md5
      md5: 088449c5d4a8a10e89ac6ec42f2e878c.dir
      size: 2687848905
      nfiles: 98731
    - path: params.yaml
      hash: md5
      md5: 77aa10f58b282aa4196f1570ce916106
      size: 1286
    - path: src/data/make_dataset.py
      hash: md5
      md5: f3cad2e229a528fe837c51f907046d45
      size: 11930
    params:
      params.yaml:
        data_ratio: 0.1
        data_split.random_state: 42
        data_split.shuffle: true
        data_split.test_size: 0.15
        data_split.validation_size: 0.15
    outs:
    - path: data/processed/
      hash: md5
      md5: d12fb6e8d1d11dec4b32bf8be8dc1f62.dir
      size: 5586994
      nfiles: 7
  train_model:
    cmd: python -m src.models.train_model_mlflow
    deps:
    - path: data/processed/
      hash: md5
      md5: d12fb6e8d1d11dec4b32bf8be8dc1f62.dir
      size: 5586994
      nfiles: 7
    - path: params.yaml
      hash: md5
      md5: 77aa10f58b282aa4196f1570ce916106
      size: 1286
    - path: src/models/metrics.py
      hash: md5
      md5: e35fa89d2c4dcbd2af7205455eeea8d0
      size: 2986
    - path: src/models/models.py
      hash: md5
      md5: 0ce3edc42b0e2ee4eb34c57e432491a0
      size: 4822
    - path: src/models/train_model_image_mlflow.py
      hash: md5
      md5: 155b56743c2c3e98b226c629840252dc
      size: 10201
    - path: src/models/train_model_mlflow.py
      hash: md5
      md5: 1e5371078b132b6739ec6c56fb7fad18
      size: 1224
    - path: src/models/train_model_text_mlflow.py
      hash: md5
      md5: 59d6b99ff51f8605356b09afc5ab7e00
      size: 6888
    - path: src/tools/tools.py
      hash: md5
      md5: 1c195ac7e97f2fa60fe609e90a439d06
      size: 7066
    params:
      params.yaml:
        model_selection.model_type: text
        models_parameters.Camembert.max_length: 16
        models_parameters.Camembert.model_name: almanach/camembert-base
        models_parameters.EfficientNetB1.model_name: EfficientNetB1
        models_parameters.EfficientNetB1.nb_trainable_layers: 0
        optimizer_parameters.amsgrad: true
        optimizer_parameters.learning_rate: 2e-05
        optimizer_parameters.weighting_decay: 1e-08
        training_parameters.batch_size: 16
        training_parameters.epochs: 1
    outs:
    - path: models/
      hash: md5
      md5: 6a214e43b2aeb70615f67f5fafc1559d.dir
      size: 1436881529
      nfiles: 2
  evaluate_model:
    cmd: python -m src.models.evaluate_model
    deps:
    - path: data/processed/
      hash: md5
      md5: 38c4f4e22a33fb1515a6bf3333a07028.dir
      size: 5599437
      nfiles: 8
    - path: models/
      hash: md5
      md5: 6a214e43b2aeb70615f67f5fafc1559d.dir
      size: 1436881529
      nfiles: 2
    - path: params.yaml
      hash: md5
      md5: 77aa10f58b282aa4196f1570ce916106
      size: 1286
    - path: src/models/evaluate_model.py
      hash: md5
      md5: d4919bdcf2ec63fecf72e2235a4053c5
      size: 1220
    - path: src/models/metrics.py
      hash: md5
      md5: e35fa89d2c4dcbd2af7205455eeea8d0
      size: 2986
    - path: src/models/models.py
      hash: md5
      md5: 0ce3edc42b0e2ee4eb34c57e432491a0
      size: 4822
    - path: src/tools/tools.py
      hash: md5
      md5: 1c195ac7e97f2fa60fe609e90a439d06
      size: 7066
    params:
      params.yaml:
        model_selection.model_type: text
    outs:
    - path: metrics/
      hash: md5
      md5: d05a45c39ace7d8b1ce66a03ed8b73ab.dir
      size: 6355
      nfiles: 2
